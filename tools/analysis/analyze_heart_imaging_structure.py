#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
å¿ƒè„æˆåƒè®ºæ–‡ç»“æ„åˆ†æå·¥å…·
æ ¹æ®ç”¨æˆ·æä¾›çš„è®ºæ–‡ç»“æ„ï¼Œåˆ†æå¦‚ä½•æå–å’Œå¤„ç†è¿™ç§å¤æ‚çš„å¤šå±‚æ¬¡ç« èŠ‚ç»“æ„
"""

def analyze_heart_imaging_thesis_structure():
    """
    åˆ†æå¿ƒè„æˆåƒè®ºæ–‡çš„å¤æ‚ç»“æ„
    ç”¨æˆ·æä¾›çš„ç»“æ„:
    1 ç»ªè®º
      ### 1.1 ç ”ç©¶èƒŒæ™¯
      ### 1.2 å›½å†…å¤–ç ”ç©¶ç°çŠ¶
    2 å¿ƒè„å»ºæ¨¡çš„åŸºç¡€ç†è®º
      ### 2.1 å…¨å¿ƒå»ºæ¨¡
      ### 2.2 CTAå›¾åƒé¢„å¤„ç†ä¸å¢å¼º
      ### 2.3 å¿ƒè„å›¾åƒåˆ†å‰²
    3 å¿ƒè„CTAå›¾åƒåˆ†å‰²
      ### 3.1 åŸºäºæ·±åº¦å­¦ä¹ çš„å¿ƒè„CTAå›¾åƒåˆ†å‰²ç®—æ³•
      ### 3.2 åŸºäºåŒºåŸŸç”Ÿé•¿çš„å¿ƒè„CTAå›¾åƒåˆ†å‰²ç®—æ³•
      ### 3.3 å¿ƒè„CTAå›¾åƒåˆ†å‰²ç®—æ³•æ¯”è¾ƒ
    4 å››ç»´åŠ¨æ€ç»Ÿè®¡ä½“å½¢å¿ƒè„æ¨¡å‹çš„æ„å»º
      ### 4.1 å¿ƒè„CTAå›¾åƒçš„é…å‡†
      ### 4.2 å››ç»´åŠ¨æ€ç»Ÿè®¡ä½“å½¢å¿ƒè„æ¨¡å‹çš„æ„å»ºæ–¹æ³•
      ### 4.3 å››ç»´åŠ¨æ€ç»Ÿè®¡ä½“å½¢å¿ƒè„æ¨¡å‹çš„éªŒè¯
      ### 4.4 å››ç»´åŠ¨æ€ç»Ÿè®¡ä½“å½¢å¿ƒè„æ¨¡å‹çš„åº”ç”¨
    5 ç»“è®º
    """
    
    print("=== å¿ƒè„æˆåƒè®ºæ–‡ç»“æ„åˆ†æ ===\n")
    
    # 1. ç»“æ„ç‰¹ç‚¹åˆ†æ
    print("ğŸ“‹ ç»“æ„ç‰¹ç‚¹åˆ†æ:")
    print("1. ä¸»ç« èŠ‚é‡‡ç”¨æ•°å­—ç¼–å·: 1, 2, 3, 4, 5")
    print("2. å­ç« èŠ‚é‡‡ç”¨Markdownæ ¼å¼: ### X.Y æ ‡é¢˜")
    print("3. æ··åˆä¸­è‹±æ–‡å†…å®¹")
    print("4. åŒ»å­¦ä¸“ä¸šæœ¯è¯­è¾ƒå¤š")
    print("5. å±‚æ¬¡æ¸…æ™°ï¼Œæ¯ä¸ªä¸»ç« èŠ‚ä¸‹æœ‰2-4ä¸ªå­ç« èŠ‚")
    print()
    
    # 2. æå–ç­–ç•¥
    print("ğŸ¯ æå–ç­–ç•¥:")
    print("ç­–ç•¥1: ä¸¤é˜¶æ®µæ£€æµ‹")
    print("  - ç¬¬ä¸€é˜¶æ®µ: æ£€æµ‹ä¸»ç« èŠ‚ (1 ç»ªè®º, 2 å¿ƒè„å»ºæ¨¡çš„åŸºç¡€ç†è®º, etc.)")
    print("  - ç¬¬äºŒé˜¶æ®µ: åœ¨æ¯ä¸ªä¸»ç« èŠ‚å†…æ£€æµ‹å­ç« èŠ‚ (### 1.1, ### 1.2, etc.)")
    print()
    print("ç­–ç•¥2: å±‚æ¬¡åŒ–æ¨¡å¼åŒ¹é…")
    print("  - ä¸»ç« èŠ‚æ¨¡å¼: r'^(\\d+)\\s+([^\\n\\r]+)'")
    print("  - å­ç« èŠ‚æ¨¡å¼: r'^###\\s+(\\d+\\.\\d+)\\s+([^\\n\\r]+)'")
    print()
    print("ç­–ç•¥3: å†…å®¹è¾¹ç•Œç¡®å®š")
    print("  - ä¸»ç« èŠ‚è¾¹ç•Œ: ä»å½“å‰ç« èŠ‚å¼€å§‹åˆ°ä¸‹ä¸€ä¸ªä¸»ç« èŠ‚æˆ–æ–‡æ¡£ç»“æŸ")
    print("  - å­ç« èŠ‚è¾¹ç•Œ: ä»å½“å‰å­ç« èŠ‚å¼€å§‹åˆ°ä¸‹ä¸€ä¸ªå­ç« èŠ‚ã€ä¸»ç« èŠ‚æˆ–ç« èŠ‚ç»“æŸ")
    print()
    
    # 3. æ­£åˆ™è¡¨è¾¾å¼è®¾è®¡
    print("ğŸ” æ­£åˆ™è¡¨è¾¾å¼è®¾è®¡:")
    
    main_chapter_patterns = {
        'chapter_1': r'^(1)\s+(ç»ªè®º)\s*$',
        'chapter_2': r'^(2)\s+(å¿ƒè„å»ºæ¨¡çš„åŸºç¡€ç†è®º)\s*$',
        'chapter_3': r'^(3)\s+(å¿ƒè„CTAå›¾åƒåˆ†å‰²)\s*$',
        'chapter_4': r'^(4)\s+(å››ç»´åŠ¨æ€ç»Ÿè®¡ä½“å½¢å¿ƒè„æ¨¡å‹çš„æ„å»º)\s*$',
        'chapter_5': r'^(5)\s+(ç»“è®º)\s*$',
        'chapter_generic': r'^(\d+)\s+([^\n\r]+)\s*$'
    }
    
    subsection_patterns = {
        'subsection_1_1': r'^###\s+(1\.1)\s+(ç ”ç©¶èƒŒæ™¯)\s*$',
        'subsection_1_2': r'^###\s+(1\.2)\s+(å›½å†…å¤–ç ”ç©¶ç°çŠ¶)\s*$',
        'subsection_2_1': r'^###\s+(2\.1)\s+(å…¨å¿ƒå»ºæ¨¡)\s*$',
        'subsection_2_2': r'^###\s+(2\.2)\s+(CTAå›¾åƒé¢„å¤„ç†ä¸å¢å¼º)\s*$',
        'subsection_2_3': r'^###\s+(2\.3)\s+(å¿ƒè„å›¾åƒåˆ†å‰²)\s*$',
        'subsection_3_1': r'^###\s+(3\.1)\s+(åŸºäºæ·±åº¦å­¦ä¹ çš„å¿ƒè„CTAå›¾åƒåˆ†å‰²ç®—æ³•)\s*$',
        'subsection_3_2': r'^###\s+(3\.2)\s+(åŸºäºåŒºåŸŸç”Ÿé•¿çš„å¿ƒè„CTAå›¾åƒåˆ†å‰²ç®—æ³•)\s*$',
        'subsection_3_3': r'^###\s+(3\.3)\s+(å¿ƒè„CTAå›¾åƒåˆ†å‰²ç®—æ³•æ¯”è¾ƒ)\s*$',
        'subsection_4_1': r'^###\s+(4\.1)\s+(å¿ƒè„CTAå›¾åƒçš„é…å‡†)\s*$',
        'subsection_4_2': r'^###\s+(4\.2)\s+(å››ç»´åŠ¨æ€ç»Ÿè®¡ä½“å½¢å¿ƒè„æ¨¡å‹çš„æ„å»ºæ–¹æ³•)\s*$',
        'subsection_4_3': r'^###\s+(4\.3)\s+(å››ç»´åŠ¨æ€ç»Ÿè®¡ä½“å½¢å¿ƒè„æ¨¡å‹çš„éªŒè¯)\s*$',
        'subsection_4_4': r'^###\s+(4\.4)\s+(å››ç»´åŠ¨æ€ç»Ÿè®¡ä½“å½¢å¿ƒè„æ¨¡å‹çš„åº”ç”¨)\s*$',
        'subsection_generic': r'^###\s+(\d+\.\d+)\s+([^\n\r]+)\s*$'
    }
    
    print("ä¸»ç« èŠ‚æ¨¡å¼:")
    for key, pattern in main_chapter_patterns.items():
        print(f"  {key}: {pattern}")
    print()
    
    print("å­ç« èŠ‚æ¨¡å¼:")
    for key, pattern in subsection_patterns.items():
        print(f"  {key}: {pattern}")
    print()
    
    # 4. å®ç°å»ºè®®
    print("ğŸ’¡ å®ç°å»ºè®®:")
    print("1. å¢å¼ºå½“å‰çš„extract_sections_with_ai.py")
    print("2. æ·»åŠ å¿ƒè„æˆåƒä¸“ç”¨æ¨¡å¼")
    print("3. å®ç°å±‚æ¬¡åŒ–æ£€æµ‹ç®—æ³•")
    print("4. æ”¯æŒåµŒå¥—ç« èŠ‚ç»“æ„")
    print("5. æ·»åŠ åŒ»å­¦æœ¯è¯­è¯†åˆ«")
    print()
    
    # 5. æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ
    print("âš ï¸ æ½œåœ¨æŒ‘æˆ˜:")
    print("æŒ‘æˆ˜1: æ ‡é¢˜å¯èƒ½æœ‰å˜ä½“ (å¦‚CTA vs. cta)")
    print("è§£å†³æ–¹æ¡ˆ: ä½¿ç”¨ä¸åŒºåˆ†å¤§å°å†™çš„åŒ¹é…")
    print()
    print("æŒ‘æˆ˜2: å­ç« èŠ‚ç¼–å·å¯èƒ½ä¸è¿ç»­")
    print("è§£å†³æ–¹æ¡ˆ: ä½¿ç”¨é€šç”¨æ¨¡å¼ + ç‰¹å®šæ¨¡å¼ç»“åˆ")
    print()
    print("æŒ‘æˆ˜3: å†…å®¹è¾¹ç•Œå¯èƒ½æ¨¡ç³Š")
    print("è§£å†³æ–¹æ¡ˆ: å¤šé‡éªŒè¯æœºåˆ¶ï¼Œæ£€æŸ¥å†…å®¹ä¸€è‡´æ€§")
    print()
    
    # 6. æµ‹è¯•ç”¨ä¾‹
    print("ğŸ§ª æµ‹è¯•ç”¨ä¾‹å»ºè®®:")
    test_content = """
1 ç»ªè®º

### 1.1 ç ”ç©¶èƒŒæ™¯
å¿ƒè„ç–¾ç—…æ˜¯å½“ä»Šä¸–ç•Œçš„ä¸»è¦å¥åº·å¨èƒä¹‹ä¸€...

### 1.2 å›½å†…å¤–ç ”ç©¶ç°çŠ¶  
åœ¨å¿ƒè„å»ºæ¨¡é¢†åŸŸï¼Œå›½å¤–ç ”ç©¶èµ·æ­¥è¾ƒæ—©...

2 å¿ƒè„å»ºæ¨¡çš„åŸºç¡€ç†è®º

### 2.1 å…¨å¿ƒå»ºæ¨¡
å…¨å¿ƒå»ºæ¨¡æ˜¯æŒ‡å¯¹æ•´ä¸ªå¿ƒè„ç»“æ„çš„ä¸‰ç»´é‡å»º...

### 2.2 CTAå›¾åƒé¢„å¤„ç†ä¸å¢å¼º
CTAå›¾åƒé€šå¸¸åŒ…å«å™ªå£°å’Œä¼ªå½±...
"""
    
    print("æµ‹è¯•å†…å®¹ç¤ºä¾‹:")
    print(test_content)
    
    return {
        'main_patterns': main_chapter_patterns,
        'sub_patterns': subsection_patterns,
        'test_content': test_content
    }

if __name__ == "__main__":
    result = analyze_heart_imaging_thesis_structure()
    print("\n åˆ†æå®Œæˆï¼")
    print("\nä¸‹ä¸€æ­¥æ“ä½œå»ºè®®:")
    print("1. å°†åˆ†æå‡ºçš„æ¨¡å¼æ·»åŠ åˆ°extract_sections_with_ai.py")
    print("2. å®ç°å±‚æ¬¡åŒ–æ£€æµ‹ç®—æ³•")
    print("3. ä½¿ç”¨çœŸå®çš„å¿ƒè„æˆåƒè®ºæ–‡è¿›è¡Œæµ‹è¯•")

